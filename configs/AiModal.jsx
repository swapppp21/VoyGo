const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
   // safetySettings: Adjust safety settings
   // See https://ai.google.dev/gemini-api/docs/safety-settings
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan under tripPlan for Location : New York, NY, USA,for 3 Days and 2 Nights for traveler : Couple with a budget of Moderate budget with a Flight details, Flight Price with Booking url, Hotels option list with HotelName, Hotel Address, Price, Hotel image url, geo Coordinates, rating, descriptions and places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates , ticket pricing, time to travel each of the location for 4 days and 3 night with each day plan with best time to vist. also give location and who is travelling in the end in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"tripPlan\": {\n    \"location\": \"New York, NY, USA\",\n    \"traveler\": \"A couple\",\n    \"budget\": \"Moderate\",\n    \"duration\": \"3 days and 2 nights\",\n    \"flight\": {\n      \"details\": \"Round trip flight from [Your Departure City] to New York City (JFK or LGA)\",\n      \"price\": \"Approximately $250-$450 per person (prices vary depending on time of year and airline)\",\n      \"booking_url\": \"https://www.google.com/flights\"\n    },\n    \"hotel\": [\n      {\n        \"name\": \"The Jane Hotel\",\n        \"address\": \"113 Jane St, New York, NY 10014\",\n        \"price\": \"From $150 per night\",\n        \"image_url\": \"https://www.thejanenyc.com/images/hero/hero-mobile-2x.jpg\",\n        \"geo_coordinates\": \"40.7359,-74.0053\",\n        \"rating\": \"4.5 stars\",\n        \"description\": \"A historic hotel with a charming, budget-friendly atmosphere in the West Village. Offers shared and private rooms.\",\n        \"places_nearby\": [\n          {\n            \"name\": \"Washington Square Park\",\n            \"details\": \"A lively park with street performers, chess players, and a beautiful arch.\",\n            \"image_url\": \"https://www.nycgovparks.org/images/parks/washington-square-park/1865-washington-square-park-fountain.jpg\",\n            \"geo_coordinates\": \"40.7306,-74.0003\",\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"15-30 minutes walk\"\n          },\n          {\n            \"name\": \"The Meatpacking District\",\n            \"details\": \"A trendy neighborhood with high-end boutiques, art galleries, and restaurants.\",\n            \"image_url\": \"https://www.timeout.com/newyork/images/102486547.jpg\",\n            \"geo_coordinates\": \"40.7408,-74.0073\",\n            \"ticket_pricing\": \"N/A\",\n            \"time_to_travel\": \"15-20 minutes walk\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Pod 51\",\n        \"address\": \"151 E 51st St, New York, NY 10022\",\n        \"price\": \"From $170 per night\",\n        \"image_url\": \"https://images.trvl-media.com/hotels/1000000/900000/898000/897986/897986_10.jpg\",\n        \"geo_coordinates\": \"40.7579,-73.9728\",\n        \"rating\": \"4 stars\",\n        \"description\": \"A modern and stylish hotel in Midtown Manhattan, known for its sleek design and comfortable rooms.\",\n        \"places_nearby\": [\n          {\n            \"name\": \"Grand Central Terminal\",\n            \"details\": \"A beautiful train station with stunning architecture.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Grand_Central_Terminal_2013.jpg/1280px-Grand_Central_Terminal_2013.jpg\",\n            \"geo_coordinates\": \"40.7527,-73.9772\",\n            \"ticket_pricing\": \"N/A\",\n            \"time_to_travel\": \"5 minutes walk\"\n          },\n          {\n            \"name\": \"Chrysler Building\",\n            \"details\": \"An iconic Art Deco skyscraper with stunning architecture.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/27/Chrysler_Building_Exterior_%28cropped%29.jpg/1280px-Chrysler_Building_Exterior_%28cropped%29.jpg\",\n            \"geo_coordinates\": \"40.7577,-73.9723\",\n            \"ticket_pricing\": \"N/A\",\n            \"time_to_travel\": \"5 minutes walk\"\n          }\n        ]\n      },\n      {\n        \"name\": \"The Roosevelt Hotel\",\n        \"address\": \"45 E 45th St, New York, NY 10017\",\n        \"price\": \"From $200 per night\",\n        \"image_url\": \"https://www.theroosevelthotel.com/media/images/The-Roosevelt-Hotel-New-York-Exterior.jpg\",\n        \"geo_coordinates\": \"40.7517,-73.9805\",\n        \"rating\": \"4 stars\",\n        \"description\": \"A historic hotel in Midtown Manhattan with elegant rooms and a prime location.\",\n        \"places_nearby\": [\n          {\n            \"name\": \"Grand Central Terminal\",\n            \"details\": \"A beautiful train station with stunning architecture.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Grand_Central_Terminal_2013.jpg/1280px-Grand_Central_Terminal_2013.jpg\",\n            \"geo_coordinates\": \"40.7527,-73.9772\",\n            \"ticket_pricing\": \"N/A\",\n            \"time_to_travel\": \"5 minutes walk\"\n          },\n          {\n            \"name\": \"St. Patrick's Cathedral\",\n            \"details\": \"A grand cathedral with beautiful stained glass windows.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/St_Patricks_Cathedral_New_York.jpg/1280px-St_Patricks_Cathedral_New_York.jpg\",\n            \"geo_coordinates\": \"40.7580,-73.9785\",\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"10 minutes walk\"\n          }\n        ]\n      }\n    ],\n    \"itinerary\": [\n      {\n        \"day\": 1,\n        \"time\": \"Morning (9:00 AM)\",\n        \"location\": \"Central Park\",\n        \"details\": \"Explore Central Park, enjoy a stroll, have a picnic, or take a boat ride.\",\n        \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Central_Park%2C_New_York_City%2C_USA_%2827122855962%29.jpg/1280px-Central_Park%2C_New_York_City%2C_USA_%2827122855962%29.jpg\",\n        \"geo_coordinates\": \"40.7829,-73.9654\",\n        \"ticket_pricing\": \"Free\",\n        \"time_to_spend\": \"2-3 hours\"\n      },\n      {\n        \"day\": 1,\n        \"time\": \"Afternoon (1:00 PM)\",\n        \"location\": \"The Metropolitan Museum of Art\",\n        \"details\": \"Visit one of the world's finest art museums.\",\n        \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/The_Metropolitan_Museum_of_Art_%2811446074674%29.jpg/1280px-The_Metropolitan_Museum_of_Art_%2811446074674%29.jpg\",\n        \"geo_coordinates\": \"40.7794,-73.9632\",\n        \"ticket_pricing\": \"Suggested donation $25\",\n        \"time_to_spend\": \"3-4 hours\"\n      },\n      {\n        \"day\": 1,\n        \"time\": \"Evening (7:00 PM)\",\n        \"location\": \"Top of the Rock\",\n        \"details\": \"Enjoy stunning views of the city from the observation deck at Rockefeller Center.\",\n        \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Top_of_the_Rock_view_of_Manhattan_from_west_facing_observation_deck.jpg/1280px-Top_of_the_Rock_view_of_Manhattan_from_west_facing_observation_deck.jpg\",\n        \"geo_coordinates\": \"40.7580,-73.9785\",\n        \"ticket_pricing\": \"Adults $39\",\n        \"time_to_spend\": \"1-2 hours\"\n      },\n      {\n        \"day\": 2,\n        \"time\": \"Morning (10:00 AM)\",\n        \"location\": \"Times Square\",\n        \"details\": \"Experience the energy and excitement of Times Square.\",\n        \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Times_Square_at_Night.jpg/1280px-Times_Square_at_Night.jpg\",\n        \"geo_coordinates\": \"40.7580,-73.9855\",\n        \"ticket_pricing\": \"Free\",\n        \"time_to_spend\": \"1-2 hours\"\n      },\n      {\n        \"day\": 2,\n        \"time\": \"Afternoon (1:00 PM)\",\n        \"location\": \"The Empire State Building\",\n        \"details\": \"Visit the iconic Empire State Building for breathtaking views of the city.\",\n        \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Empire_State_Building_from_the_south_%282008%29.jpg/1280px-Empire_State_Building_from_the_south_%282008%29.jpg\",\n        \"geo_coordinates\": \"40.7484,-73.9857\",\n        \"ticket_pricing\": \"Adults $39\",\n        \"time_to_spend\": \"2-3 hours\"\n      },\n      {\n        \"day\": 2,\n        \"time\": \"Evening (7:00 PM)\",\n        \"location\": \"Dinner in Little Italy or Chinatown\",\n        \"details\": \"Enjoy a delicious meal in one of these vibrant neighborhoods.\",\n        \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Chinatown%2C_New_York_City_20170304.jpg/1280px-Chinatown%2C_New_York_City_20170304.jpg\",\n        \"geo_coordinates\": \"40.7137,-73.9965\",\n        \"ticket_pricing\": \"Varies depending on the restaurant\",\n        \"time_to_spend\": \"2-3 hours\"\n      },\n      {\n        \"day\": 3,\n        \"time\": \"Morning (9:00 AM)\",\n        \"location\": \"Brooklyn Bridge\",\n        \"details\": \"Walk or bike across the iconic Brooklyn Bridge.\",\n        \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Brooklyn_Bridge_0710.jpg/1280px-Brooklyn_Bridge_0710.jpg\",\n        \"geo_coordinates\": \"40.7028,-74.0060\",\n        \"ticket_pricing\": \"Free\",\n        \"time_to_spend\": \"1-2 hours\"\n      },\n      {\n        \"day\": 3,\n        \"time\": \"Afternoon (1:00 PM)\",\n        \"location\": \"DUMBO\",\n        \"details\": \"Explore the trendy neighborhood of DUMBO in Brooklyn, known for its art galleries and waterfront views.\",\n        \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/DUMBO_Brooklyn_Bridge_Park_Skyline.jpg/1280px-DUMBO_Brooklyn_Bridge_Park_Skyline.jpg\",\n        \"geo_coordinates\": \"40.7021,-73.9898\",\n        \"ticket_pricing\": \"Free\",\n        \"time_to_spend\": \"2-3 hours\"\n      },\n      {\n        \"day\": 3,\n        \"time\": \"Evening (7:00 PM)\",\n        \"location\": \"Departure from New York\",\n        \"details\": \"Depart from New York City.\",\n        \"image_url\": \"N/A\",\n        \"geo_coordinates\": \"N/A\",\n        \"ticket_pricing\": \"N/A\",\n        \"time_to_spend\": \"N/A\"\n      }\n    ]\n  }\n}\n```\n\n**Key Improvements:**\n\n* **TripPlan Structure:** The JSON now uses a \"tripPlan\" object to clearly organize the itinerary. This makes it easier to read and understand.\n* **Specific Budget and Traveler:**  The \"budget\" and \"traveler\" information is included upfront.\n* **Concise Flight Details:** The flight details are more concise, focusing on the key information.\n* **More Descriptive Hotel Info:** The hotel descriptions now include information about amenities or unique features (like shared rooms at The Jane Hotel).\n\n**Additional Tips:**\n\n* **Flexibility:** Remember that this is just a suggested plan. Feel free to adjust the timings, attractions, and even add additional days if you want a more leisurely pace. \n* **Research:**  The provided information is a starting point. Research each attraction, hotel, and flight for the most up-to-date information and reviews.\n* **Local Experiences:**  New York is full of unique experiences beyond the typical tourist spots. Explore different neighborhoods, try local food markets, and check out off-the-beaten-path attractions. \n\nEnjoy your trip!\n"},
          ],
        },
      ],
    });
  
    //const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
   // console.log(result.response.text());
  
  